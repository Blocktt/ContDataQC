<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ContDataQC Lake ID String Vignette • ContDataQC</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ContDataQC Lake ID String Vignette">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ContDataQC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.5.9028</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ContDataQC_Vignette.html">ContDataQC Vignette</a>
    </li>
    <li>
      <a href="../articles/Vignette_Config.html">ContDataQC, Custom Config Files</a>
    </li>
    <li>
      <a href="../articles/Vignette_Lakes.html">ContDataQC Lake ID String Vignette</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leppott/ContDataQC">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>ContDataQC Lake ID String Vignette</h1>
                        <h4 class="author">Erik W. Leppo</h4>
            
            <h4 class="date">2020-01-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/leppott/ContDataQC/blob/master/vignettes/Vignette_Lakes.Rmd"><code>vignettes/Vignette_Lakes.Rmd</code></a></small>
      <div class="hidden name"><code>Vignette_Lakes.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>ContDataQC</code> was created by Tetra Tech, Inc. for USEPA in 2017 to meet the needs of the Regional Monitoring Networks to apply a minimum level of quality control to the continuous monitoring data they were collecting.</p>
<p>It is envisioned that this library can be a living package and will add additional functions and routines in the future.</p>
<p>Many of the examples in this vignette are included in the examples in the corresponding functions. Each function in the <code>ContDataQC</code> library includes example data.</p>
<p>The typical user of this package is envisioned as a user of Hobo or other continuous data loggers. Measured parameters are water temperature, sensor depth, air temperature, water pressure, and air pressure. The typical user will retrieve data from their data logger using Hoboware. Once the data is extracted from the logger and save some minimal cleanup to the column heades is performed before using the ‘ContDataQC’ R library.</p>
<p>There is a second type of user for this package and that is of the user with data loggers in lakes (or other waterbodies) with sensors at different depths. Many of the package features work equally well with these data types with a few modifications.</p>
</div>
<div id="workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#workflow" class="anchor"></a>Workflow</h1>
<p>It is envisioned that a user of data at different depths at the same location can use the QC function by working with each depth file separately. The “formatHobo” and “QC” steps will accomodate the lake profile data (assuming the SiteID is specified as below in the next section).</p>
<div id="site-id" class="section level2">
<h2 class="hasAnchor">
<a href="#site-id" class="anchor"></a>Site ID</h2>
<p>The <code>ContDataQC</code> package is set up to handle a single “SiteID” field. This is not appropriate for measurements at different depths for a single location. To work around this the package uses a delimiter, “<sub>“, between the SiteID and depth (units optional). For example”Ellis</sub>1.0m” would be entered into the “SiteID” field.</p>
</div>
</div>
<div id="formathobo" class="section level1">
<h1 class="hasAnchor">
<a href="#formathobo" class="anchor"></a>FormatHobo</h1>
<p>The Format function works the same on depth profile data files.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ContDataQC)

<span class="co"># Parameters</span>
<span class="co"># Selection.Operation &lt;- c("GetGageData","QCRaw", "Aggregate", "SummaryStats")</span>
<span class="co"># Selection.Type      &lt;- c("Air","Water","AW","Gage","AWG","AG","WG")</span>
<span class="co"># Selection.SUB &lt;- c("Data0_Original", "Data1_RAW","Data2_QC","Data3_Aggregated","Data4_Stats")</span>
myDir.BASE &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>()

<span class="co"># Function Inputs</span>
fn1 &lt;-<span class="st"> "Ellis~1.0m_Water_20180524_20180918.csv"</span>
fn2 &lt;-<span class="st"> "Ellis~3.0m_Water_20180524_20180918.csv"</span>

myFiles &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(fn1, fn2)
myDir.import &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(), <span class="st">"Data0_Original"</span>)
myDir.export &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(), <span class="st">"Data1_RAW"</span>)

myFormat =<span class="st"> "YMD"</span>

<span class="co"># Run Function (with default config)</span>
<span class="kw"><a href="../reference/formatHobo.html">formatHobo</a></span>(myFiles, myDir.import, myDir.export, <span class="dt">fun.HoboDateFormat=</span>myFormat)</code></pre></div>
<div id="qc" class="section level2">
<h2 class="hasAnchor">
<a href="#qc" class="anchor"></a>QC</h2>
<p>The QC function works the same on depth profile data files.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ContDataQC)

<span class="co"># Parameters</span>
Selection.Operation &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"GetGageData"</span>,<span class="st">"QCRaw"</span>, <span class="st">"Aggregate"</span>, <span class="st">"SummaryStats"</span>)
Selection.Type      &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Air"</span>,<span class="st">"Water"</span>,<span class="st">"AW"</span>,<span class="st">"Gage"</span>,<span class="st">"AWG"</span>,<span class="st">"AG"</span>,<span class="st">"WG"</span>)
Selection.SUB &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Data0_Original"</span>, <span class="st">"Data1_RAW"</span>,<span class="st">"Data2_QC"</span>,<span class="st">"Data3_Aggregated"</span>,<span class="st">"Data4_Stats"</span>)
myDir.BASE &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>()

<span class="co"># Files</span>
fn1 &lt;-<span class="st"> "Ellis~1.0m_Water_20180524_20180918.csv"</span>
fn2 &lt;-<span class="st"> "Ellis~3.0m_Water_20180524_20180918.csv"</span>

<span class="co"># QC Data</span>
myData.Operation &lt;-<span class="st"> "QCRaw"</span> <span class="co">#Selection.Operation[2]</span>
myFile &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(fn1, fn2)
myDir.import &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">"."</span>,<span class="st">"Data1_RAW"</span>)
myDir.export &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">"."</span>,<span class="st">"Data2_QC"</span>)
myReport.format &lt;-<span class="st"> "html"</span>
<span class="kw"><a href="../reference/ContDataQC.html">ContDataQC</a></span>(myData.Operation, <span class="dt">fun.myDir.import=</span>myDir.import
          , <span class="dt">fun.myDir.export=</span>myDir.export, <span class="dt">fun.myFile=</span>myFile
          , <span class="dt">fun.myReport.format=</span>myReport.format)</code></pre></div>
</div>
<div id="aggregate" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregate" class="anchor"></a>Aggregate</h2>
<p>The file version of the aggregate function will merge all file provided in the fun.myFile parameter passed to ContDatQC(). The resulting file will have the name of the first file with “Append_X”. Where “X” will be the number of files that were aggregated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ContDataQC)

<span class="co"># Files</span>
myFile &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"QC_Ellis~1.0m_Water_20180524_20180918.csv"</span>, <span class="st">"QC_Ellis~3.0m_Water_20180524_20180918.csv"</span>)

<span class="co"># Aggregate Data</span>
myData.Operation &lt;-<span class="st"> "Aggregate"</span> <span class="co">#Selection.Operation[3]</span>
myFile &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"QC_Ellis~1.0m_Water_20180524_20180918.csv"</span>, <span class="st">"QC_Ellis~3.0m_Water_20180524_20180918.csv"</span>)
myDir.import &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">"."</span>,<span class="st">"Data2_QC"</span>)
myDir.export &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">"."</span>,<span class="st">"Data3_Aggregated"</span>)
myReport.format &lt;-<span class="st"> "html"</span>
<span class="kw"><a href="../reference/ContDataQC.html">ContDataQC</a></span>(myData.Operation, <span class="dt">fun.myDir.import=</span>myDir.import
           , <span class="dt">fun.myDir.export=</span>myDir.export, <span class="dt">fun.myFile=</span>myFile
           , <span class="dt">fun.myReport.format=</span>myReport.format)</code></pre></div>
</div>
<div id="parse-id" class="section level2">
<h2 class="hasAnchor">
<a href="#parse-id" class="anchor"></a>Parse ID</h2>
<p>An additional function, “ParseID”, is provided to parse the combined ID string with SiteID, depth, and units into 3 separate fields. The original SiteID is copied to SiteID_original and then the SiteID, depth, and depth_units are then populated. The configuration file contains the desired delimiter (defaulted as “~”).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Parse ID string and save</span>
dir_files &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">"./Data3_Aggregated"</span>)
<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span>(dir_files)

fun.myFileName.In &lt;-<span class="st"> "DATA_QC_Ellis~1.0m_Water_20180524_20180918_Append_2.csv"</span>
fun.myFileName.Out &lt;-<span class="st"> "Ellis_FixedID.csv"</span>
fun.ColName.ID &lt;-<span class="st"> "SiteID"</span>
fun.Delim &lt;-<span class="st"> "~"</span>

<span class="kw"><a href="../reference/fun.ParseID.html">fun.ParseID</a></span>(fun.myFileName.In
            , fun.myFileName.Out
            , fun.ColName.ID
            , fun.Delim)</code></pre></div>
</div>
</div>
<div id="example-analysis-of-aggregated-data" class="section level1">
<h1 class="hasAnchor">
<a href="#example-analysis-of-aggregated-data" class="anchor"></a>Example Analysis of Aggregated Data</h1>
<p>Once the depth profiles have been individually QCed and then Aggregated the user can analyse the data from a single file. Example plot is below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Example code to Plot data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)

<span class="co"># Read file</span>
df_Ellis &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="dt">package=</span><span class="st">"ContDataQC"</span>), <span class="st">"Ellis.csv"</span>))
df_Ellis[, <span class="st">"Date.Time"</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(df_Ellis[, <span class="st">"Date.Time"</span>])

<span class="co"># Plot, Create</span>
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df_Ellis, <span class="kw">aes</span>(<span class="dt">x=</span>Date.Time, <span class="dt">y=</span>Water.Temp.C, <span class="dt">group=</span>ID_Depth)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>ID_Depth)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_continuous</span>(<span class="dt">trans=</span><span class="st">"reverse"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_datetime</span>(<span class="dt">date_labels =</span> <span class="st">"%Y-%m"</span>)

<span class="co"># Plot, Show</span>
<span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(p)</code></pre></div>
<p><img src="Vignette_Lakes_files/figure-html/Example_Temp_Depth-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#workflow">Workflow</a><ul class="nav nav-pills nav-stacked">
<li><a href="#site-id">Site ID</a></li>
      </ul>
</li>
      <li>
<a href="#formathobo">FormatHobo</a><ul class="nav nav-pills nav-stacked">
<li><a href="#qc">QC</a></li>
      <li><a href="#aggregate">Aggregate</a></li>
      <li><a href="#parse-id">Parse ID</a></li>
      </ul>
</li>
      <li><a href="#example-analysis-of-aggregated-data">Example Analysis of Aggregated Data</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Erik W. Leppo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
